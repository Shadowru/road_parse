{"version":3,"sources":["../src/parse_address.js"],"names":["fs","require","readline","Logger","useDefaults","metaparser","MetaParser2","getMeta","addr","count","state","undefined","region","road","numbers","geo","printCSVLine","line","meta","console","log","residue","processLineByLine","file","fileStream","createReadStream","rl","createInterface","input","crlfDelay","Infinity","parsed_addr","parse"],"mappings":";;AAEA;;;;AAGA;;;;;;AALA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AAMAE,mBAAOC,WAAP;;AAEA,MAAMC,UAAU,GAAG,IAAIC,oBAAJ,EAAnB;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACnB,MAAIC,KAAK,GAAG,CAAZ;;AACA,MAAID,IAAI,CAACE,KAAL,KAAeC,SAAnB,EAA8B;AAC1BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACI,MAAL,KAAgBD,SAApB,EAA+B;AAC3BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACK,IAAL,KAAcF,SAAlB,EAA6B;AACzBF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACM,OAAL,KAAiBH,SAArB,EAAgC;AAC5BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACO,GAAL,KAAaJ,SAAjB,EAA4B;AACxBF,IAAAA,KAAK;AACR;;AACD,SAAO,OAAOA,KAAd;AACH;;AAED,SAASO,YAAT,CAAsBR,IAAtB,EAA4BS,IAA5B,EAAkC;AAC9B,QAAMC,IAAI,GAAGX,OAAO,CAACC,IAAD,CAApB;AACAW,EAAAA,OAAO,CAACC,GAAR,CACIF,IAAI,GAAG,GAAP,GACEV,IAAI,CAACE,KADP,GACe,GADf,GAEEF,IAAI,CAACI,MAFP,GAEgB,GAFhB,GAGEJ,IAAI,CAACK,IAHP,GAGc,GAHd,GAIEL,IAAI,CAACO,GAJP,GAIa,GAJb,GAKEP,IAAI,CAACM,OALP,GAKiB,GALjB,GAMEN,IAAI,CAACa,OANP,GAMiB,GANjB,GAOEJ,IARN;AAUH;;AAED,eAAeK,iBAAf,CAAiCC,IAAjC,EAAuC;AACnC,QAAMC,UAAU,GAAGxB,EAAE,CAACyB,gBAAH,CAAoBF,IAApB,CAAnB;AAEA,QAAMG,EAAE,GAAGxB,QAAQ,CAACyB,eAAT,CAAyB;AAChCC,IAAAA,KAAK,EAAEJ,UADyB;AAEhCK,IAAAA,SAAS,EAAEC;AAFqB,GAAzB,CAAX,CAHmC,CAOnC;AACA;;AAEAX,EAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ;;AAEA,aAAW,MAAMH,IAAjB,IAAyBS,EAAzB,EAA6B;AACzB;AACA;AACA,UAAMK,WAAW,GAAG1B,UAAU,CAAC2B,KAAX,CAAiBf,IAAjB,CAApB;AAEAD,IAAAA,YAAY,CAACe,WAAD,EAAcd,IAAd,CAAZ;AACH;AACJ,C,CAED;;;AACAK,iBAAiB,CAAC,iBAAD,CAAjB,C,CACA","sourcesContent":["const fs = require('fs');\r\nconst readline = require('readline');\r\nimport Logger from \"js-logger\";\r\n\r\n//import MetaParser from \"./MetaParser\";\r\nimport MetaParser2 from \"./MetaParser2\";\r\n\r\nLogger.useDefaults();\r\n\r\nconst metaparser = new MetaParser2();\r\n\r\nfunction getMeta(addr) {\r\n    let count = 0;\r\n    if (addr.state !== undefined) {\r\n        count++;\r\n    }\r\n    if (addr.region !== undefined) {\r\n        count++;\r\n    }\r\n    if (addr.road !== undefined) {\r\n        count++;\r\n    }\r\n    if (addr.numbers !== undefined) {\r\n        count++;\r\n    }\r\n    if (addr.geo !== undefined) {\r\n        count++;\r\n    }\r\n    return 'PH' + count;\r\n}\r\n\r\nfunction printCSVLine(addr, line) {\r\n    const meta = getMeta(addr);\r\n    console.log(\r\n        meta + \";\"\r\n        + addr.state + \";\"\r\n        + addr.region + \";\"\r\n        + addr.road + \";\"\r\n        + addr.geo + \";\"\r\n        + addr.numbers + \";\"\r\n        + addr.residue + \";\"\r\n        + line\r\n    );\r\n}\r\n\r\nasync function processLineByLine(file) {\r\n    const fileStream = fs.createReadStream(file);\r\n\r\n    const rl = readline.createInterface({\r\n        input: fileStream,\r\n        crlfDelay: Infinity\r\n    });\r\n    // Note: we use the crlfDelay option to recognize all instances of CR LF\r\n    // ('\\r\\n') in input.txt as a single line break.\r\n\r\n    console.log('Meta;State;Region;Road;Geo;Meters;Residue;Line');\r\n\r\n    for await (const line of rl) {\r\n        //Logger.debug('===========================');\r\n        //Logger.debug('Data line : ' + line);\r\n        const parsed_addr = metaparser.parse(line);\r\n\r\n        printCSVLine(parsed_addr, line);\r\n    }\r\n}\r\n\r\n//processLineByLine('../data/test.txt');\r\nprocessLineByLine('./data/nomn.txt');\r\n//processLineByLine('../data/input.txt');\r\n"],"file":"parse_address.js"}