{"version":3,"sources":["../src/parse_address.js"],"names":["fs","require","readline","Logger","useDefaults","metaparser","MetaParser2","getMeta","addr","count","state","undefined","region","road","numbers","geo","printCSVLine","line","meta","console","log","residue","processLineByLine","file","fileStream","createReadStream","rl","createInterface","input","crlfDelay","Infinity","parsed_addr","parse"],"mappings":";;AAEA;;;;AAGA;;;;;;AALA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AAMAE,mBAAOC,WAAP;;AAEA,MAAMC,UAAU,GAAG,IAAIC,oBAAJ,EAAnB;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACnB,MAAIC,KAAK,GAAG,CAAZ;;AACA,MAAID,IAAI,CAACE,KAAL,KAAeC,SAAnB,EAA8B;AAC1BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACI,MAAL,KAAgBD,SAApB,EAA+B;AAC3BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACK,IAAL,KAAcF,SAAlB,EAA6B;AACzBF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACM,OAAL,KAAiBH,SAArB,EAAgC;AAC5BF,IAAAA,KAAK;AACR;;AACD,MAAID,IAAI,CAACO,GAAL,KAAaJ,SAAjB,EAA4B;AACxBF,IAAAA,KAAK;AACR;;AACD,SAAO,OAAOA,KAAd;AACH;;AAED,SAASO,YAAT,CAAsBR,IAAtB,EAA4BS,IAA5B,EAAkC;AAC9B,QAAMC,IAAI,GAAGX,OAAO,CAACC,IAAD,CAApB;AACAW,EAAAA,OAAO,CAACC,GAAR,CACIF,IAAI,GAAG,GAAP,GACEV,IAAI,CAACE,KADP,GACe,GADf,GAEEF,IAAI,CAACI,MAFP,GAEgB,GAFhB,GAGEJ,IAAI,CAACK,IAHP,GAGc,GAHd,GAIEL,IAAI,CAACO,GAJP,GAIa,GAJb,GAKEP,IAAI,CAACM,OALP,GAKiB,GALjB,GAMEN,IAAI,CAACa,OANP,GAMiB,GANjB,GAOEJ,IARN;AAUH;;AAED,eAAeK,iBAAf,CAAiCC,IAAjC,EAAuC;AACnC,QAAMC,UAAU,GAAGxB,EAAE,CAACyB,gBAAH,CAAoBF,IAApB,CAAnB;AAEA,QAAMG,EAAE,GAAGxB,QAAQ,CAACyB,eAAT,CAAyB;AAChCC,IAAAA,KAAK,EAAEJ,UADyB;AAEhCK,IAAAA,SAAS,EAAEC;AAFqB,GAAzB,CAAX,CAHmC,CAOnC;AACA;;AAEAX,EAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ;;AAEA,aAAW,MAAMH,IAAjB,IAAyBS,EAAzB,EAA6B;AACzB;AACA;AACA,UAAMK,WAAW,GAAG1B,UAAU,CAAC2B,KAAX,CAAiBf,IAAjB,CAApB;AAEAD,IAAAA,YAAY,CAACe,WAAD,EAAcd,IAAd,CAAZ;AACH;AACJ,C,CAED;;;AACAK,iBAAiB,CAAC,iBAAD,CAAjB,C,CACA","sourcesContent":["const fs = require('fs');\nconst readline = require('readline');\nimport Logger from \"js-logger\";\n\n//import MetaParser from \"./MetaParser\";\nimport MetaParser2 from \"./MetaParser2\";\n\nLogger.useDefaults();\n\nconst metaparser = new MetaParser2();\n\nfunction getMeta(addr) {\n    let count = 0;\n    if (addr.state !== undefined) {\n        count++;\n    }\n    if (addr.region !== undefined) {\n        count++;\n    }\n    if (addr.road !== undefined) {\n        count++;\n    }\n    if (addr.numbers !== undefined) {\n        count++;\n    }\n    if (addr.geo !== undefined) {\n        count++;\n    }\n    return 'PH' + count;\n}\n\nfunction printCSVLine(addr, line) {\n    const meta = getMeta(addr);\n    console.log(\n        meta + \";\"\n        + addr.state + \";\"\n        + addr.region + \";\"\n        + addr.road + \";\"\n        + addr.geo + \";\"\n        + addr.numbers + \";\"\n        + addr.residue + \";\"\n        + line\n    );\n}\n\nasync function processLineByLine(file) {\n    const fileStream = fs.createReadStream(file);\n\n    const rl = readline.createInterface({\n        input: fileStream,\n        crlfDelay: Infinity\n    });\n    // Note: we use the crlfDelay option to recognize all instances of CR LF\n    // ('\\r\\n') in input.txt as a single line break.\n\n    console.log('Meta;State;Region;Road;Geo;Meters;Residue;Line');\n\n    for await (const line of rl) {\n        //Logger.debug('===========================');\n        //Logger.debug('Data line : ' + line);\n        const parsed_addr = metaparser.parse(line);\n\n        printCSVLine(parsed_addr, line);\n    }\n}\n\n//processLineByLine('../data/test.txt');\nprocessLineByLine('./data/nomn.txt');\n//processLineByLine('../data/input.txt');\n"],"file":"parse_address.js"}